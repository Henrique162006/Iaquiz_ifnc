const questionsData = {
  informatica: {
    facil: [
      {
        q: "Como a IA pode ser aplicada na correção de códigos em Informática?",
        a: [
          "Executando programas lentamente",
          "Revisando ortografia de textos",
          "Identificando bugs e sugerindo soluções automaticamente",
          "Gerando conteúdo artístico"
        ],
        c: 2
      },
      {
        q: "De que forma a IA pode contribuir com a usabilidade de sistemas?",
        a: [
          "Desorganizando menus",
          "Removendo botões essenciais",
          "Adicionando pop-ups aleatórios",
          "Adaptando interfaces conforme o comportamento do usuário"
        ],
        c: 3
      },
      {
        q: "A IA pode ser usada para prever falhas em sistemas?",
        a: [
          "Sim, com análise de dados históricos e padrões",
          "Apenas em sistemas físicos",
          "Não, somente humanos podem prever",
          "Apenas por adivinhação"
        ],
        c: 0
      },
      {
        q: "Qual tecnologia da IA é comumente usada em assistentes virtuais?",
        a: [
          "Impressão 3D",
          "Processamento de linguagem natural (PLN)",
          "Realidade aumentada",
          "Desenho vetorial"
        ],
        c: 1
      },
      {
        q: "Como a IA pode otimizar o desempenho de softwares?",
        a: [
          "Limitando acessos",
          "Aumentando tempo de carregamento",
          "Analisando e ajustando recursos com base em uso",
          "Reduzindo funções úteis"
        ],
        c: 2
      },
      {
        q: "IA pode ser usada na personalização de conteúdos em sistemas?",
        a: [
          "Apenas com programação estática",
          "Não, tudo deve ser padrão",
          "Sim, através de aprendizado de máquina",
          "Somente com dados manuais"
        ],
        c: 2
      },
      {
        q: "Qual o papel da IA na análise de logs de sistemas?",
        a: [
          "Ignorar erros frequentes",
          "Imprimir logs",
          "Identificar padrões e anomalias automaticamente",
          "Excluir todos os registros"
        ],
        c: 2
      },
      {
        q: "A IA pode gerar código automaticamente?",
        a: [
          "Sim, com ferramentas como GitHub Copilot",
          "Somente com autorização judicial",
          "Apenas com linguagens antigas",
          "Não, é contra a ética"
        ],
        c: 0
      },
      {
        q: "Qual ferramenta usa IA para sugerir melhorias em código?",
        a: [
          "Zoom",
          "Excel",
          "GitHub Copilot",
          "Paint"
        ],
        c: 2
      },
      {
        q: "Como a IA pode apoiar testes de software?",
        a: [
          "Gerando erros novos",
          "Excluindo bugs",
          "Executando testes automatizados com aprendizado de padrões",
          "Desligando o sistema"
        ],
        c: 2
      }
    ],
    medio: [
      {
        q: "Como a IA pode identificar padrões em grandes volumes de dados?",
        a: [
          "Com algoritmos de aprendizado de máquina",
          "Somente manualmente",
          "Por sorte",
          "Com calculadora"
        ],
        c: 0
      },
      {
        q: "Qual técnica de IA ajuda no reconhecimento facial?",
        a: [
          "Redes neurais convolucionais",
          "Criptografia",
          "Histograma de cores",
          "Diagramas de classe"
        ],
        c: 0
      },
      {
        q: "Para que serve um sistema especialista com IA?",
        a: [
          "Desenhar avatares",
          "Tomar decisões baseadas em conhecimento humano codificado",
          "Criar músicas",
          "Decorar ambientes"
        ],
        c: 1
      },
      {
        q: "Qual linguagem é mais usada para IA?",
        a: [
          "CSS",
          "Python",
          "HTML",
          "SQL"
        ],
        c: 1
      },
      {
        q: "O que são algoritmos de machine learning?",
        a: [
          "Modelos que aprendem com dados",
          "Sites estáticos",
          "Jogos interativos",
          "Criações aleatórias"
        ],
        c: 0
      },
      {
        q: "Como a IA auxilia na segurança digital?",
        a: [
          "Desconectando usuários",
          "Ignorando alertas",
          "Apagando logs",
          "Detectando padrões de ataque cibernético"
        ],
        c: 3
      },
      {
        q: "Qual IA ficou famosa por vencer um campeão mundial de Go?",
        a: [
          "Watson",
          "Siri",
          "AlphaGo",
          "Alexa"
        ],
        c: 2
      },
      {
        q: "O que é aprendizado supervisionado?",
        a: [
          "Treinar com dados rotulados",
          "Ouvir podcasts",
          "Testar um jogo",
          "Treinar com imagens sem nome"
        ],
        c: 0
      },
      {
        q: "Qual IA ajuda em traduções automáticas?",
        a: [
          "Google Translate",
          "Notepad",
          "Bloco de Notas",
          "CMD"
        ],
        c: 0
      },
      {
        q: "Como a IA pode contribuir para a acessibilidade digital?",
        a: [
          "Desligando leitores de tela",
          "Removendo atalhos",
          "Evitando acessos",
          "Gerando legendas automáticas"
        ],
        c: 3
      }
    ],
    dificil: [
      {
        q: "O que é um algoritmo genético?",
        a: [
          "Sistema baseado na evolução natural",
          "Desenho de células",
          "Método de clonagem",
          "Técnica de redes sociais"
        ],
        c: 0
      },
      {
        q: "Como a IA pode agir em ciberataques?",
        a: [
          "Detectando e respondendo automaticamente",
          "Gerando senhas fracas",
          "Desconectando servidores",
          "Aumentando vulnerabilidades"
        ],
        c: 0
      },
      {
        q: "O que são redes neurais artificiais?",
        a: [
          "Simulação de neurônios humanos",
          "Sistema de fiação de computadores",
          "Redes Wi-Fi",
          "Aplicativos de redes sociais"
        ],
        c: 0
      },
      {
        q: "Qual IA venceu humanos no jogo Jeopardy?",
        a: [
          "Watson",
          "Siri",
          "Cortana",
          "Alexa"
        ],
        c: 0
      },
      {
        q: "Como a IA pode gerar deepfakes?",
        a: [
          "Com redes adversariais generativas (GANs)",
          "Com editores de imagem simples",
          "Com código HTML",
          "Com vídeo VHS"
        ],
        c: 0
      },
      {
        q: "Qual o desafio ético da IA?",
        a: [
          "Tomada de decisão autônoma",
          "Desenhar websites",
          "Jogar online",
          "Programar robôs brinquedos"
        ],
        c: 0
      },
      {
        q: "O que é PLN na IA?",
        a: [
          "Processamento de Linguagem Natural",
          "Plano de Linguagem Nível",
          "Programa Legal Numérico",
          "Protocolo de Linguagem Neutra"
        ],
        c: 0
      },
      {
        q: "Como a IA é usada em carros autônomos?",
        a: [
          "Analisando sensores e tomando decisões",
          "Desligando motores",
          "Instalando sons de robô",
          "Usando guias manuais"
        ],
        c: 0
      },
      {
        q: "IA pode substituir todas as profissões?",
        a: [
          "Não, pois depende de habilidades humanas",
          "Sim, imediatamente",
          "Apenas cargos administrativos",
          "Totalmente"
        ],
        c: 0
      },
      {
        q: "Como garantir o uso ético da IA?",
        a: [
          "Com regulamentações e transparência",
          "Usando códigos fechados",
          "Ignorando impactos sociais",
          "Retirando direitos digitais"
        ],
        c: 0
      }
    ]
  },
  administracao: {
    facil: [
      {
        q: "Como a IA pode ser aplicada na gestão de estoques?",
        a: [
          "Comprando produtos aleatórios",
          "Removendo prateleiras",
          "Ignorando dados antigos",
          "Prevendo demandas com base em históricos"
        ],
        c: 3
      },
      {
        q: "A IA pode ajudar no atendimento ao cliente como?",
        a: [
          "Criando dificuldades",
          "Utilizando chatbots para respostas rápidas",
          "Desligando o telefone",
          "Ignorando solicitações"
        ],
        c: 1
      },
      {
        q: "Qual o impacto da IA nos relatórios gerenciais?",
        a: [
          "Gera relatórios automáticos e personalizados",
          "Torna-os obsoletos",
          "Aumenta burocracia",
          "Ignora indicadores"
        ],
        c: 0
      },
      {
        q: "IA na contabilidade pode:",
        a: [
          "Automatizar lançamentos e reduzir erros",
          "Criar notas falsas",
          "Esconder valores",
          "Confundir relatórios"
        ],
        c: 0
      },
      {
        q: "A IA pode ajudar na análise de concorrência?",
        a: [
          "Apenas observando vitrines",
          "Com pesquisas físicas",
          "Sim, coletando e comparando dados do mercado",
          "Não, só humanos analisam"
        ],
        c: 2
      },
      {
        q: "IA em logística pode:",
        a: [
          "Cancelar pedidos",
          "Gerar congestionamento",
          "Parar caminhões",
          "Otimizar rotas e prever entregas"
        ],
        c: 3
      },
      {
        q: "Como a IA auxilia em recursos humanos?",
        a: [
          "Criando perfis falsos",
          "Selecionando candidatos com base em dados",
          "Excluindo informações",
          "Ignorando currículos"
        ],
        c: 1
      },
      {
        q: "A IA pode prever vendas futuras?",
        a: [
          "Sim, com análise de tendências",
          "Somente manualmente",
          "Apenas por achismo",
          "Não existe isso"
        ],
        c: 0
      },
      {
        q: "A IA pode gerar relatórios financeiros?",
        a: [
          "Apenas para empresas grandes",
          "Nunca",
          "Sim, com dados em tempo real",
          "Somente à mão"
        ],
        c: 2
      },
      {
        q: "Qual sistema usa IA para gestão empresarial?",
        a: [
          "Netflix",
          "ERP com inteligência embarcada",
          "Paint",
          "Word"
        ],
        c: 1
      }
    ],
    medio: [
      {
        q: "O que é análise preditiva na administração?",
        a: [
          "Usar palpites",
          "Ignorar dados",
          "Prever eventos com base em dados históricos",
          "Desenhar gráficos"
        ],
        c: 2
      },
      {
        q: "Como a IA pode ajudar em auditorias?",
        a: [
          "Bagunçando documentos",
          "Verificando padrões e irregularidades",
          "Escondendo relatórios",
          "Imprimindo tudo"
        ],
        c: 1
      },
      {
        q: "IA em marketing digital serve para?",
        a: [
          "Fazer panfletos",
          "Tocar músicas",
          "Analisar comportamento e direcionar anúncios",
          "Fechar sites"
        ],
        c: 2
      },
      {
        q: "O que é um chatbot?",
        a: [
          "Sistema de segurança",
          "Caixa eletrônico",
          "Programa que simula conversa humana",
          "Robô físico"
        ],
        c: 2
      },
      {
        q: "IA no controle de qualidade faz?",
        a: [
          "Detecta falhas e propõe melhorias",
          "Ignora defeitos",
          "Quebra normas",
          "Pinta produtos"
        ],
        c: 0
      },
      {
        q: "A IA pode criar planejamentos financeiros?",
        a: [
          "Só papel e caneta",
          "Sim, com base em projeções de dados",
          "Apenas estimativas vagas",
          "Nunca"
        ],
        c: 1
      },
      {
        q: "Como a IA pode aumentar a produtividade?",
        a: [
          "Automatizando tarefas repetitivas",
          "Reduzindo metas",
          "Complicando processos",
          "Desmotivando equipe"
        ],
        c: 0
      },
      {
        q: "IA pode ser usada em quais setores da empresa?",
        a: [
          "Somente na limpeza",
          "Em todos os setores",
          "Apenas no RH",
          "Na cantina"
        ],
        c: 1
      },
      {
        q: "Qual o impacto da IA no planejamento estratégico?",
        a: [
          "Retarda decisões",
          "Elimina criatividade",
          "Melhora previsões e cenários",
          "Faz suposições aleatórias"
        ],
        c: 2
      },
      {
        q: "IA ajuda no controle de estoque como?",
        a: [
          "Prevendo e automatizando reposições",
          "Confundindo os números",
          "Escondendo itens",
          "Eliminando etiquetas"
        ],
        c: 0
      }
    ],
    dificil: [
      {
        q: "Como a IA impacta decisões estratégicas em grandes empresas?",
        a: [
          "Baseando decisões em dados e tendências",
          "Tornando decisões mais lentas",
          "Removendo a necessidade de planejamento",
          "Desmotivando gestores"
        ],
        c: 0
      },
      {
        q: "IA pode substituir profissionais administrativos?",
        a: [
          "Somente temporariamente",
          "Totalmente em todos os setores",
          "Nunca, pois depende de análise humana crítica",
          "Sim, sem restrições"
        ],
        c: 2
      },
      {
        q: "Como a IA ajuda no gerenciamento de riscos?",
        a: [
          "Ignorando variações",
          "Com modelagens preditivas e análise de cenários",
          "Com suposições manuais",
          "Apagando registros antigos"
        ],
        c: 1
      },
      {
        q: "Como a IA pode atuar em compliance empresarial?",
        a: [
          "Garantindo conformidade com políticas e leis via automação",
          "Ignorando normas",
          "Removendo controles internos",
          "Simplificando processos sem controle"
        ],
        c: 0
      },
      {
        q: "IA pode realizar análises SWOT?",
        a: [
          "Sim, com base em dados do ambiente interno e externo",
          "Apenas humanos fazem isso",
          "Somente com papel e lápis",
          "Não existe IA pra isso"
        ],
        c: 0
      },
      {
        q: "Como a IA se aplica em gestão de projetos?",
        a: [
          "Gerando relatórios automáticos e otimizando cronogramas",
          "Eliminando tarefas",
          "Desviando metas",
          "Reduzindo prazos à força"
        ],
        c: 0
      },
      {
        q: "IA pode atuar em tomada de decisão tática como?",
        a: [
          "Através de análises de dados em tempo real",
          "Pelo acaso",
          "Com base em sorte",
          "Excluindo o planejamento"
        ],
        c: 0
      },
      {
        q: "Qual impacto da IA em pesquisa de mercado?",
        a: [
          "Reduzindo custos e ampliando dados analisados",
          "Tornando-a obsoleta",
          "Removendo feedbacks",
          "Ignorando perfis de consumo"
        ],
        c: 0
      },
      {
        q: "IA pode gerar dashboards de performance?",
        a: [
          "Sim, com dados integrados e visualizações dinâmicas",
          "Apenas com tabelas",
          "Somente impressos",
          "Jamais"
        ],
        c: 0
      },
      {
        q: "IA pode ser integrada a ERPs?",
        a: [
          "Sim, para automatizar análises e relatórios",
          "Não, nunca",
          "Somente fora do sistema",
          "Se tiver internet"
        ],
        c: 0
      }
    ]
  },
  quimica: {
    facil: [
      {
        q: "Como a IA pode ser usada em laboratórios escolares?",
        a: [
          "Para prever reações químicas e auxiliar nas práticas",
          "Para desligar equipamentos",
          "Para aumentar risco químico",
          "Para proibir experimentos"
        ],
        c: 0
      },
      {
        q: "IA pode ajudar no entendimento de fórmulas químicas?",
        a: [
          "Sim, com softwares de visualização molecular",
          "Não, fórmulas são humanas",
          "Apenas com vídeos do YouTube",
          "De forma limitada e manual"
        ],
        c: 0
      },
      {
        q: "Como a IA pode atuar em simulações de laboratório?",
        a: [
          "Gerando ambientes virtuais e seguros",
          "Evitando simulações",
          "Apenas em laboratório físico",
          "Criando explosões"
        ],
        c: 0
      },
      {
        q: "A IA pode ajudar na previsão de reações químicas?",
        a: [
          "Sim, com base em dados anteriores",
          "Somente com microscópio",
          "Não existe isso",
          "Apenas em aulas práticas"
        ],
        c: 0
      },
      {
        q: "IA pode apoiar a análise de pH?",
        a: [
          "Sim, com sensores inteligentes",
          "Não, apenas papel tornassol",
          "Somente pelo tato",
          "Com provadores químicos humanos"
        ],
        c: 0
      },
      {
        q: "IA pode ser usada para segurança química?",
        a: [
          "Sim, alertando sobre condições perigosas",
          "Criando novos riscos",
          "Apagando alarmes",
          "Somente com humanos"
        ],
        c: 0
      },
      {
        q: "Como a IA pode ajudar em relatórios de laboratório?",
        a: [
          "Gerando relatórios automáticos e analisando resultados",
          "Ignorando dados",
          "Misturando os valores",
          "Copiando relatórios antigos"
        ],
        c: 0
      },
      {
        q: "IA pode prever rendimento de reações?",
        a: [
          "Sim, usando algoritmos preditivos",
          "Só se for um chute",
          "Somente ao final da aula",
          "Com balança manual"
        ],
        c: 0
      },
      {
        q: "IA pode substituir cálculos de estequiometria?",
        a: [
          "Sim, otimizando tempo do aluno",
          "Nunca",
          "Apenas se o aluno errar",
          "De forma teórica apenas"
        ],
        c: 0
      },
      {
        q: "Qual vantagem da IA no ensino de química?",
        a: [
          "Visualização interativa e personalizada",
          "Remover conteúdos difíceis",
          "Aumentar o número de provas",
          "Imprimir apostilas"
        ],
        c: 0
      }
    ],
    medio: [
      {
        q: "Como a IA pode prever propriedades de compostos químicos?",
        a: [
          "Analisando dados moleculares e padrões",
          "Usando pipetas",
          "Pelo cheiro",
          "Com aquecimento manual"
        ],
        c: 0
      },
      {
        q: "Como a IA é usada na produção de remédios?",
        a: [
          "Identificando combinações químicas eficientes",
          "Misturando aleatoriamente",
          "Gerando sabores artificiais",
          "Copiando embalagens"
        ],
        c: 0
      },
      {
        q: "IA pode ser usada em cromatografia?",
        a: [
          "Sim, interpretando os resultados com precisão",
          "Não, é impossível",
          "Apenas com papel",
          "Só em laboratório físico"
        ],
        c: 0
      },
      {
        q: "Como a IA ajuda em espectroscopia?",
        a: [
          "Interpretando sinais espectrais",
          "Emitindo luz",
          "Segurando tubos",
          "Criando prismas"
        ],
        c: 0
      },
      {
        q: "Como a IA auxilia na química analítica?",
        a: [
          "Fazendo cálculos e simulações complexas",
          "Pesando manualmente",
          "Misturando reagentes",
          "Colorindo tubos de ensaio"
        ],
        c: 0
      },
      {
        q: "IA pode identificar substâncias desconhecidas?",
        a: [
          "Sim, comparando com bases de dados",
          "Apenas professores podem",
          "Não existe IA para isso",
          "Somente se for incolor"
        ],
        c: 0
      },
      {
        q: "IA pode contribuir com sustentabilidade química?",
        a: [
          "Otimiza uso de reagentes e reduz desperdício",
          "Multiplica resíduos",
          "Cria novos plásticos",
          "Aumenta consumo de energia"
        ],
        c: 0
      },
      {
        q: "Como a IA atua em processos industriais?",
        a: [
          "Controlando parâmetros de reação em tempo real",
          "Desorganizando máquinas",
          "Criando riscos",
          "Derramando compostos"
        ],
        c: 0
      },
      {
        q: "Como a IA pode prever toxicidade de substâncias?",
        a: [
          "Simulando interações com o organismo",
          "Cheirando o produto",
          "Observando cor",
          "Testando no tato"
        ],
        c: 0
      },
      {
        q: "IA pode auxiliar na análise de solos?",
        a: [
          "Interpretando dados de amostras para agricultura",
          "Apenas com microscópio óptico",
          "Somente no verão",
          "Com balança de precisão"
        ],
        c: 0
      }
    ],
    dificil: [
      {
        q: "Como a IA pode prever reações químicas complexas?",
        a: [
          "Usando algoritmos de predição química",
          "Tentativa e erro",
          "Com fórmulas decoradas",
          "Método manual"
        ],
        c: 0
      },
      {
        q: "A IA pode ajudar em experimentos químicos como?",
        a: [
          "Misturando sem critérios",
          "Trocando frascos",
          "Simulando resultados antes da prática",
          "Ignorando dados"
        ],
        c: 2
      },
      {
        q: "A IA pode classificar compostos químicos automaticamente?",
        a: [
          "Sim, com reconhecimento de padrões moleculares",
          "Só com lupa",
          "Não é possível",
          "Só manualmente"
        ],
        c: 0
      },
      {
        q: "Como a IA atua em pesquisa de novos materiais?",
        a: [
          "Modelando propriedades preditivas",
          "Destruindo compostos",
          "Misturando tudo",
          "Criando por acaso"
        ],
        c: 0
      },
      {
        q: "IA pode monitorar processos químicos industriais?",
        a: [
          "Não há tecnologia",
          "Somente humanos",
          "Sim, com sensores e algoritmos",
          "Jamais"
        ],
        c: 2
      },
      {
        q: "IA em controle de qualidade de reagentes?",
        a: [
          "Avalia pureza com algoritmos",
          "Ignora validade",
          "Desconsidera impurezas",
          "Quebra frascos"
        ],
        c: 0
      },
      {
        q: "Em análise espectral, a IA ajuda como?",
        a: [
          "Tira fotos",
          "Interpreta sinais com maior precisão",
          "Desliga equipamentos",
          "Confunde espectros"
        ],
        c: 1
      },
      {
        q: "A IA pode ser usada em laboratório remoto?",
        a: [
          "Sim, para controle e análise à distância",
          "Somente após testes",
          "Só presencial",
          "Apenas com técnicos"
        ],
        c: 0
      },
      {
        q: "Qual uso da IA em química medicinal?",
        a: [
          "Descobrir novas moléculas",
          "Trocar remédios",
          "Impedir pesquisas",
          "Não tem uso"
        ],
        c: 0
      },
      {
        q: "IA na produção química serve para:",
        a: [
          "Confundir operários",
          "Apagar dados",
          "Otimizar processos industriais",
          "Aumentar custos"
        ],
        c: 2
      }
    ]
  }
};
// ===== LÓGICA DO QUIZ =====

let currentQ = 0, score = 0, questions = [], playerName = "";

function startGame() {
  const area = document.getElementById("area-select").value;
  const nivel = document.getElementById("nivel-select").value;
  const name = document.getElementById("username").value.trim();

  if (!name) return alert("Digite seu nome!");
  playerName = name;

  questions = questionsData[area][nivel];
  currentQ = 0;
  score = 0;

  document.getElementById("start-screen").style.display = "none";
  document.getElementById("quiz-screen").style.display = "block";
  document.getElementById("greeting").textContent = `Boa sorte, ${name}!`;
  showQuestion();
}

function showQuestion() {
  const q = questions[currentQ];
  document.getElementById("question-text").textContent = q.q;
  const answers = document.getElementById("answers");
  answers.innerHTML = "";

  q.a.forEach((alt, i) => {
    const letra = String.fromCharCode(65 + i);
    const btn = document.createElement("button");
    btn.textContent = `${letra}) ${alt}`;
    btn.onclick = () => checkAnswer(i);
    answers.appendChild(btn);
  });
}

function checkAnswer(index) {
  const q = questions[currentQ];
  const buttons = document.querySelectorAll("#answers button");
  buttons.forEach((btn, i) => {
    btn.disabled = true;
    if (i === q.c) btn.classList.add("correct");
    if (i === index && index !== q.c) btn.classList.add("incorrect");
  });
  if (index === q.c) score++;
}

function nextQuestion() {
  currentQ++;
  if (currentQ < questions.length) {
    showQuestion();
  } else {
    endGame();
  }
}

function endGame() {
  document.getElementById("quiz-screen").style.display = "none";
  document.getElementById("result-screen").style.display = "block";
  document.getElementById("final-username").textContent = playerName;
  document.getElementById("score").textContent = score;
  document.getElementById("total").textContent = questions.length;

  let feedback = "", badge = "", roboFace = "";

  if (score === questions.length) {
    feedback = "Você é um gênio da IA!";
    badge = "🏆 Mestre Supremo";
    roboFace = "https://sdmntprcentralus.oaiusercontent.com/files/00000000-e8bc-61f5-a9e2-68bdee13568e/raw?se=2025-07-09T17%3A21%3A24Z&sp=r&sv=2024-08-04&sr=b&scid=907cde6d-50fa-5f95-b452-01432f1f83bb&skoid=71e8fa5c-90a9-4c17-827b-14c3005164d6&sktid=a48cca56-e6da-484e-a814-9c849652bcb3&skt=2025-07-08T21%3A28%3A34Z&ske=2025-07-09T21%3A28%3A34Z&sks=b&skv=2024-08-04&sig=JZrFaFI/NBrYIVftg8tNaUMpqNxDpuZk0CRn4gnq/nc%3D";
  } else if (score >= questions.length / 2) {
    feedback = "Mandou bem! Continue aprendendo!";
    badge = "🎖️ Explorador";
    roboFace = "https://sdmntprcentralus.oaiusercontent.com/files/00000000-e8bc-61f5-a9e2-68bdee13568e/raw?se=2025-07-09T17%3A21%3A24Z&sp=r&sv=2024-08-04&sr=b&scid=907cde6d-50fa-5f95-b452-01432f1f83bb&skoid=71e8fa5c-90a9-4c17-827b-14c3005164d6&sktid=a48cca56-e6da-484e-a814-9c849652bcb3&skt=2025-07-08T21%3A28%3A34Z&ske=2025-07-09T21%3A28%3A34Z&sks=b&skv=2024-08-04&sig=JZrFaFI/NBrYIVftg8tNaUMpqNxDpuZk0CRn4gnq/nc%3D";
  } else {
    feedback = "Você está no começo da jornada!";
    badge = "📘 Iniciante";
    roboFace = "https://sdmntprcentralus.oaiusercontent.com/files/00000000-e8bc-61f5-a9e2-68bdee13568e/raw?se=2025-07-09T17%3A21%3A24Z&sp=r&sv=2024-08-04&sr=b&scid=907cde6d-50fa-5f95-b452-01432f1f83bb&skoid=71e8fa5c-90a9-4c17-827b-14c3005164d6&sktid=a48cca56-e6da-484e-a814-9c849652bcb3&skt=2025-07-08T21%3A28%3A34Z&ske=2025-07-09T21%3A28%3A34Z&sks=b&skv=2024-08-04&sig=JZrFaFI/NBrYIVftg8tNaUMpqNxDpuZk0CRn4gnq/nc%3D";
  }

  document.getElementById("feedback").textContent = feedback;
  document.getElementById("badge").textContent = badge;
  document.getElementById("emotion-bot").src = roboFace;

  let ranking = [];
  ranking.push({ name: playerName, score });
  localStorage.setItem("iaquiz_ranking", JSON.stringify(ranking));

  const list = document.getElementById("ranking");
  list.innerHTML = "";
  ranking.forEach((entry, i) => {
    const li = document.createElement("li");
    li.textContent = `${i + 1}. ${entry.name} - ${entry.score} pts`;
    list.appendChild(li);
  });

  document.getElementById("chatbot").textContent =
    `Uau, que jornada incrível, ${playerName}! Eu, seu Robô IA, estou impressionado com seu desempenho!`;

  if (playerName.toLowerCase().includes("henrique")) {
    document.getElementById("reset-container").style.display = "block";
  }

  gerarImagemCompartilhavel();
}

function gerarImagemCompartilhavel() {
  const canvas = document.getElementById("share-card");
  const ctx = canvas.getContext("2d");

  ctx.fillStyle = "#0f172a";
  ctx.fillRect(0, 0, 400, 200);

  ctx.fillStyle = "#fff";
  ctx.font = "18px Arial";
  ctx.fillText(`IAQUIZ_IFNC`, 20, 40);
  ctx.fillText(`Nome: ${playerName}`, 20, 80);
  ctx.fillText(`Pontuação: ${score}/${questions.length}`, 20, 110);
  ctx.fillText(`Conquista: ${document.getElementById("badge").textContent}`, 20, 140);

  const link = document.getElementById("download-link");
  link.href = canvas.toDataURL();
  canvas.style.display = "block";
  link.style.display = "inline-block";
}

function resetRanking() {
  localStorage.removeItem("iaquiz_ranking");
  alert("Ranking resetado com sucesso!");
  location.reload();
}

function toggleTheme() {
  const status = document.getElementById("theme-status");
  const isLight = document.body.classList.toggle("light-mode");
  status.textContent = isLight ? "Claro" : "Escuro";
  localStorage.setItem("iaquiz_theme", isLight ? "light" : "dark");
}

window.onload = () => {
  const savedTheme = localStorage.getItem("iaquiz_theme");
  if (savedTheme === "light") {
    document.body.classList.add("light-mode");
    document.getElementById("theme-status").textContent = "Claro";
  }
};
